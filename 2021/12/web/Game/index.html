<!DOCTYPE html>
<html>
<title>Game</title>

<head>
    <!-- Pixel Code for https://social.sususu.su/ -->
    <script async src="https://social.sususu.su/pixel/o6jtdmq6xjouz1iaj1kmyq29fpxbrzyo"></script>
    <!-- END Pixel Code -->
    <script src="https://cdn.blobity.dev/by.js?licenseKey=..."></script>
    <link rel="apple-touch-icon" href="https://i.imgur.com/a7SedWT.png">
    <link rel="icon" href="https://i.imgur.com/a7SedWT.png">
    <style>
        .Mountain {
            /*fit the screen and stick at the bottom*/
            position: absolute;
            bottom: 0;
            left: 0;
            width: 100%;
            height: 70%;
            z-index: -2;
        }

        .alien-1 {
            /*fit the screen and stick at the bottom left*/
            position: absolute;
            bottom: 0;
            left: 0;
            display: block;

        }

        @media screen and (max-width: 1100px) {
            .alien-1 {
                display: none;
            }

            .Mountain {
                height: 30%;
            }
        }

        .alien-2 {
            position: absolute;
            bottom: 0;
            right: 0;
        }

        .star {
            position: absolute;
            /*fit screen and display at middle*/
            margin-top: 100px;
        }

        .notification {
            position: absolute;
            top: 5px;
            left: 5px;
            z-index: 5678767876787678;
            border-radius: 10px;
            margin-top: 10px;
            margin-right: 10px;
            opacity: 0.8;
        }
    </style>
    <style>
        .main {
            display: none;
            position: absolute;
            top: 50%;
            left: 50%;
            -webkit-transform: translate(-50%, -50%);
            transform: translate(-50%, -50%);
            width: 1000px;
            height: 600px;
            border-radius: 10px;
            box-shadow: 0px 0px 10px 0px rgba(0, 0, 0, 0.75);
            background: white;
            background-color: rgba(0, 0, 0, 0.5);
            opacity: 0.8;
            z-index: 1;
            text-align: center;
            overflow: hidden;
        }

        @import url('https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap');

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Poppins', sans-serif;
        }

        body {
            /*using system ui font*/
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif;
            display: flex;
            align-items: center;
            justify-content: center;
            background: rgb(37, 92, 175);
        }

        .nav-links {
            display: none;
            align-items: center;
            background-color: rgb(99, 99, 99);
            color: whitesmoke;
            margin-top: 20px;
            padding: 15px 15px;
            border-radius: 12px;
            box-shadow: 0 5px 10px rgba(0, 0, 0, 0.2);
            z-index: 200000;
        }

        .nav-links li {
            list-style: none;
            margin: 0 12px;
        }

        .nav-links li a {
            position: relative;
            color: rgb(207, 207, 207);
            font-size: 18px;
            font-weight: 500;
            padding: 6px 0;
            text-decoration: none;
        }

        .nav-links li a:before {
            content: '';
            position: absolute;
            bottom: 0;
            left: 0;
            height: 3px;
            width: 0%;
            background: #34efdf;
            border-radius: 12px;
            transition: all 0.4s ease;
        }

        .nav-links li a:hover:before {
            width: 100%;
        }
    </style>
    <style>
        .main1 {
            position: absolute;
            top: 50%;
            left: 50%;
            -webkit-transform: translate(-50%, -50%);
            transform: translate(-50%, -50%);
            border-radius: 10px;
            width: 500px;
            padding: 5px;
            padding-top: 25px;
            padding-bottom: 25px;
            box-shadow: 0px 0px 10px 0px rgba(0, 0, 0, 0.75);
            background: white;
            background-color: whitesmoke;
            z-index: 100;
            text-align: center;
            overflow: hidden;
            transition-duration: 0.5s;
            overflow-x: hidden;
            height: 350px;
        }

        .input-group {
            margin: 0 auto;
            text-align: center;
            width: 400px;
        }

        .input-group-type {
            background: transparent;
            width: 390px;
            border: none;
            background: none;
            outline: none;
            color: black;
            margin: 0 auto;
            padding-left: 10px;

        }

        .input-group-container {
            padding: 4px;
            background-color: rgba(90, 90, 90, 0.5);
            border-radius: 5px;
            width: 400px;
            margin-bottom: 5px;
            margin-top: 10px;
            opacity: 0.8;
        }

        .LoginForm {
            margin: 0 auto;
            text-align: center;
        }

        .LoginButton {
            padding: 5px;
            border-radius: 5px;
            text-align: center;
            width: 70px;
            background-color: whitesmoke;
            margin: 0px;
            float: right;
            transition-duration: 0.5s;
            box-shadow: 0px 0px 10px 0px rgba(0, 0, 0, 0);
            margin-top: 2px;
        }

        .LoginButton:hover {
            box-shadow: 0px 0px 5px 0px rgba(0, 0, 0, 0.75);
            background-color: #1ea1f3;

        }

        .LoginText {
            color: #1ea1f3;
            font-family: sans-serif;
            font-size: 15px;
            transition-duration: 0.3s;

        }

        .LoginButton:hover>.LoginText {
            color: whitesmoke;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif;

        }

        .navigationBar {
            background-color: rgba(199, 199, 199, 1);
            padding-top: 20px;
            max-width: 600px;
            display: flex;
            text-align: center;
            border-radius: 8px;
            margin: 0 auto;
            box-shadow: 0px 0px 10px 0px rgba(0, 0, 0, 0.6);
            z-index: 100000;
        }

        .navigationBar a {
            font-weight: bold;
            font-size: 16pt;
            flex: 1;
            transform: translate(0px, -10px);
            transition-duration: 0.3s;
            text-decoration: none;
        }

        .navigationBar a:hover {
            color: sandybrown
        }
    </style>

</head>

<body>
    <div>
        <img src="https://i.imgur.com/kbauGem.png" class="Mountain" alt="">
        <img src="https://i.imgur.com/78NTUBh.png" class="alien-1" alt="">
        <img src="https://i.imgur.com/bqXW7Xi.png" class="alien-2" alt="">
        <img src="https://i.imgur.com/gT8NhCZ.png" class="star" alt="">
    </div>
    <!--這是我剛好在測試的其他東西-->
    <ul class="nav-links" id="nav">
        <li><a id="Score" href="#">Score:0</a></li>
        <li><a id="time" href="#">Time:0</a></li>
        <li><a href="#" onclick="tick--;document.getElementById('level').innerHTML='Tick:'+tick;">一</a></li>
        <li><a href="#" id="level">Refresh Tick</a></li>
        <li><a href="#" onclick="tick++;document.getElementById('level').innerHTML='Tick:'+tick;">十</a></li>
        <li><a href="#" id="gameStart" onclick="gameStart()">Start</a></li>
    </ul>
    <!--分隔線-->
    <div class="notification">
        <a style="display: flex;text-decoration:none"
            href="https://raw.githubusercontent.com/GaryKu0/NKUST/main/2021/12/web/Game/index.html">
            <img style="flex:1"
                src="https://upload.wikimedia.org/wikipedia/commons/thumb/9/91/Octicons-mark-github.svg/2048px-Octicons-mark-github.svg.png"
                height="60px" width="60px" alt="">
            <div style="margin-left: 10px;flex:2;">
                <h1 style="font-size: 30px; color:black;opacity:0.8;">Github</h1>
                <h2 style="font-size: 20px; color:black;opacity:0.8;">source code</h2>
            </div>
        </a>
    </div>
    <div class="main1" id="main1">
        <script src="https://unpkg.com/@lottiefiles/lottie-player@latest/dist/lottie-player.js"></script>
        <lottie-player src="https://assets2.lottiefiles.com/packages/lf20_ibrxdnnn.json" background="transparent"
            speed="1" style="width: 500px; height: 300px; transform: translate(0px, -75px);" loop autoplay>
        </lottie-player>
        <div class="LoginForm" style="transform: translate(0px, -150px);" id="loginForm">
            <a style="color:gray; font-size:8px; text-decoration:none">Please Enter Your Username and password to
                coninue.</a>
            <div class="input-group">
                <div class="input-group-container">
                    <input type="text" id="account" class="input-group-type" placeholder=" Enter Your username">
                </div>
                <div class="input-group-container">
                    <input type="password" id="password" class="input-group-type" placeholder=" Enter Your password">
                </div>
                <div class="LoginButton">
                    <a href="#" id="LoginText" class="LoginText" onclick="Login()"
                        style="text-decoration:none; font-weight:bold;">Login</a>
                </div>
            </div>
        </div>
    </div>
    <div class="main" id="GameCanva" style="display: none;">
        <canvas id="canvas" width="1000" height="600"></canvas>
    </div>
    <script>
        //按下enter自動切換到密碼欄位
        document.getElementById("account").addEventListener("keyup", function (event) {
            if (event.keyCode === 13) {
                event.preventDefault();
                document.getElementById("password").focus();
            }
        });
        //在密碼欄位按下enter自動登入
        document.getElementById('password').addEventListener('keydown', function (e) {
            if (e.keyCode == 13) {
                Login();
            }
        });
        //改鼠標圖案
        document.body.style.cursor = "url(http://bringerp.free.fr/Files/RotMG/cursor.gif), pointer"
        //基本的變數
        var canvas = document.getElementById("canvas");
        var ctx = canvas.getContext("2d");
        var score = 1;
        var level = 1;
        var tick = 1.5; var monsterReady = false;
        //背景
        var BG = new Image();
        BG.src = "https://img-blog.csdnimg.cn/20200218155014509.jpg?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80NTkwMjkyMw==,size_16,color_FFFFFF,t_70";
        BG.onload = function () {
            ctx.drawImage(BG, 0, 0, CanvaWidth, CanvaHeight);
        }
        var CanvaHeight = document.getElementById("canvas").height;
        var CanvaWidth = document.getElementById("canvas").width;
        //炸彈圖案
        var BombImage = new Image();
        BombImage.src = "https://i.imgur.com/Jql4CAA.png";
        var monsterImage = new Image();
        var addScore = true;
        //地鼠圖案
        monsterImage.src = "https://i.imgur.com/a7SedWT.png";
        function Summon() {
            //假如start已經按下
            if (GameIsStarted == true) {
                var random = Math.floor(Math.random() * 10) + 1;//隨機數1~10
                console.log(random);
                if (random == 10 || random == 5) { //20%機率出現炸彈
                    //summon Bomb  
                    console.log("Summon Bomb");
                    Bomb();
                }
                if (random != 10 & random != 5) { //80%出現地鼠
                    //summon Rats
                    console.log("Summon Rats");
                    Rats();
                }
            }
            else {
            }
        }
        var RatsXX = 0;
        var RatsYY = 0;
        function Rats() {
            addScore = true;
            //create a Rats in the canva random position
            var RatX = this.x = Math.floor(Math.random() * (CanvaWidth - 50)); //隨機產生X座標
            var RatY = this.y = Math.floor(Math.random() * (CanvaHeight - 50));//隨機產生Y座標
            console.log(this.x, this.y);
            this.width = 50;
            this.height = 50;
            ctx.drawImage(monsterImage, this.x, this.y, this.width, this.height);//把地鼠畫在canva上
            //if this exist over than tick seconds destroy it
            setTimeout(function () {
                ctx.clearRect(this.x, this.y, this.width, this.height);
                ctx.drawImage(BG, 0, 0, CanvaWidth, CanvaHeight);
            }, tick * 990); //在tick秒後消失
            LeveUp();//檢測分數是否達標
            RatsXX = RatX;
            RatsYY = RatY;
            AlreadyAddScore = false;
        }
        var AlreadyAddScore = false;
        canvas.addEventListener("click", function (event) { //檢測是否有按下滑鼠
            var x = event.offsetX;
            var y = event.offsetY;
            console.log(x, y);
            if (x >= RatsXX && x <= RatsXX + 50 && y >= RatsYY && y <= RatsYY + 50) {
                ctx.clearRect(RatsXX, RatsYY, 50, 50);
                ctx.drawImage(BG, 0, 0, CanvaWidth, CanvaHeight);
                if (addScore & AlreadyAddScore == false) {
                    score++;
                    AlreadyAddScore = true;
                }
                else {
                    score--;
                }
                document.getElementById("Score").innerHTML = "Score:" + score;
                LeveUp();
            }

        });
        var doubleCheck = 0
        //every 20score get made tick*2/3
        function LeveUp() {
            if (score % 20 == 0 && doubleCheck != score) {
                doubleCheck = score
                if (ticK > 0)
                    tick = tick - 0.5;
                level++;
                if (level <= 0)
                    level = 0.5;
                document.getElementById("level").innerHTML = "Tick:" + level;
            }
        }
        function Bomb() {
            addScore = false;
            var ratX = this.x = Math.floor(Math.random() * (CanvaWidth - 50));
            var raty = this.y = Math.floor(Math.random() * (CanvaHeight - 50));
            RatsXX = ratX;
            RatsYY = raty;
            console.log(this.x, this.y);
            this.width = 50;
            this.height = 50;
            ctx.drawImage(BombImage, this.x, this.y, this.width, this.height);
            //if this exist over than tick seconds destroy it
            setTimeout(function () {
                ctx.clearRect(this.x, this.y, this.width, this.height);
                ctx.drawImage(BG, 0, 0, CanvaWidth, CanvaHeight);
            }, tick * 990);
            AlreadyAddScore = false;

        }
        var GameIsStarted = false;
        //summon again after 5 seconds
        function gameStart() {
            if (GameIsStarted == false) {
                document.getElementById("gameStart").innerHTML = "End";
                GameIsStarted = true;
                TimeLeft = 60;
                score = 0;
            }
            else if (GameIsStarted == true) {
                console.log(document.getElementById("gameStart").innerHTML)
                document.getElementById("gameStart").innerHTML = "Start";
                GameIsStarted = false;
            }
        }
        var timer = setInterval(Summon, tick * 1000);
        var TimeLeft = 60;
        var countdown = setInterval(function () {
            if (GameIsStarted == true) {
                document.getElementById("time").innerHTML = "Time:" + TimeLeft + "s";
                TimeLeft--;
            }
            if (TimeLeft == -1) {
                document.getElementById("time").innerHTML = "Time:" + 0 + "s";
                document.getElementById("gameStart").innerHTML = "Start";
                GameIsStarted = false;
            }
        }, 1000);
    </script>
    <script>
        function Login() {
            var username = document.getElementById("account").value;
            var password = document.getElementById("password").value;
            if (username == "admin" && password == "admin") {
                document.getElementById("GameCanva").style.display = "block";
                alert("登入成功 歡迎！");
                document.getElementById("main1").style.display = "none";
                document.getElementById("nav").style.display = "flex";
            }
            else {
                alert("Wrong username or password");
            }

        }
    </script>
</body>

</html>